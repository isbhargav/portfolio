<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Predicting Crime Location | AI Portforlio</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Predicting Crime Location" />
<meta name="author" content="Bhargav Lad" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We try to predict the possible location of crime given the neighbourhood based on crimetype, date, time and neighbourhood. We use goehashing to deal with latitude and longitude and encode it to single feature." />
<meta property="og:description" content="We try to predict the possible location of crime given the neighbourhood based on crimetype, date, time and neighbourhood. We use goehashing to deal with latitude and longitude and encode it to single feature." />
<link rel="canonical" href="https://isbhargav.github.io/portfolio/jupyter/matplotlib/sklearn/randomforest/knn/geohashing/feature-engineering/2020/11/01/Location_Prediction.html" />
<meta property="og:url" content="https://isbhargav.github.io/portfolio/jupyter/matplotlib/sklearn/randomforest/knn/geohashing/feature-engineering/2020/11/01/Location_Prediction.html" />
<meta property="og:site_name" content="AI Portforlio" />
<meta property="og:image" content="https://isbhargav.github.io/portfolio/images/crime_loc.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-11-01T00:00:00-05:00" />
<script type="application/ld+json">
{"url":"https://isbhargav.github.io/portfolio/jupyter/matplotlib/sklearn/randomforest/knn/geohashing/feature-engineering/2020/11/01/Location_Prediction.html","@type":"BlogPosting","headline":"Predicting Crime Location","dateModified":"2020-11-01T00:00:00-05:00","datePublished":"2020-11-01T00:00:00-05:00","author":{"@type":"Person","name":"Bhargav Lad"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://isbhargav.github.io/portfolio/jupyter/matplotlib/sklearn/randomforest/knn/geohashing/feature-engineering/2020/11/01/Location_Prediction.html"},"image":"https://isbhargav.github.io/portfolio/images/crime_loc.jpeg","description":"We try to predict the possible location of crime given the neighbourhood based on crimetype, date, time and neighbourhood. We use goehashing to deal with latitude and longitude and encode it to single feature.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/portfolio/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://isbhargav.github.io/portfolio/feed.xml" title="AI Portforlio" /><link rel="shortcut icon" type="image/x-icon" href="/portfolio/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.css" integrity="sha512-h7nl+xz8wgDlNM4NqKEM4F1NkIRS17M9+uJwIGwuo8vGqIl4BhuCKdxjWEINm+xyrUjNCnK5dCrhM0sj+wTIXw==" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/katex.min.js" integrity="sha512-/CMIhXiDA3m2c9kzRyd97MTb3MC6OVnx4TElQ7fkkoRghwDf6gi41gaT1PwF270W6+J60uTmwgeRpNpJdRV6sg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js" integrity="sha512-Do7uJAaHZm5OLrIv/yN4w0iG1dbu01kzdMNnFfu/mAqgUk6Nniv2JYHcwH+cNwjqgLcqcuBBk+JRvprLVI8azg==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A==" crossorigin="anonymous"></script>
    <script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement( document.body, {
        delimiters: [
            {left: "$$", right: "$$", display: true},
            {left: "[%", right: "%]", display: true},
            {left: "$", right: "$", display: false}
        ]}
        );
    });
    </script>


<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/portfolio/">AI Portforlio</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/portfolio/about/">About Me</a><a class="page-link" href="/portfolio/search/">Search</a><a class="page-link" href="/portfolio/categories/">Tags</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Predicting Crime Location</h1><p class="page-description">We try to predict the possible location of crime given the neighbourhood based on crimetype, date, time and neighbourhood. We use goehashing to deal with latitude and longitude and encode it to single feature.</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2020-11-01T00:00:00-05:00" itemprop="datePublished">
        Nov 1, 2020
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Bhargav Lad</span></span>
       • <span class="read-time" title="Estimated read time">
    
    
      11 min read
    
</span></p>

    
      <p class="category-tags"><i class="fas fa-tags category-tags-icon"></i></i> 
      
        <a class="category-tags-link" href="/portfolio/categories/#jupyter">jupyter</a>
        &nbsp;
      
        <a class="category-tags-link" href="/portfolio/categories/#matplotlib">matplotlib</a>
        &nbsp;
      
        <a class="category-tags-link" href="/portfolio/categories/#sklearn">sklearn</a>
        &nbsp;
      
        <a class="category-tags-link" href="/portfolio/categories/#randomforest">randomforest</a>
        &nbsp;
      
        <a class="category-tags-link" href="/portfolio/categories/#KNN">KNN</a>
        &nbsp;
      
        <a class="category-tags-link" href="/portfolio/categories/#geohashing">geohashing</a>
        &nbsp;
      
        <a class="category-tags-link" href="/portfolio/categories/#feature-engineering">feature-engineering</a>
        
      
      </p>
    

    
      
        <div class="pb-5 d-flex flex-wrap flex-justify-end">
          <div class="px-2">

    <a href="https://github.com/isbhargav/portfolio/tree/master/_notebooks/2020-11-01-Location_Prediction.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/portfolio/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/isbhargav/portfolio/master?filepath=_notebooks%2F2020-11-01-Location_Prediction.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/portfolio/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/isbhargav/portfolio/blob/master/_notebooks/2020-11-01-Location_Prediction.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/portfolio/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2020-11-01-Location_Prediction.ipynb
-->

<div class="container" id="notebook-container">
        
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">holidays</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span><span class="n">date</span>
<span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">LabelEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">OneHotEncoder</span>
<span class="kn">from</span> <span class="nn">pyproj</span> <span class="kn">import</span> <span class="n">Proj</span>
<span class="kn">import</span> <span class="nn">folium</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;crimedata_csv_all_years.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Break and Enter Commercial</td>
      <td>2012</td>
      <td>12</td>
      <td>14</td>
      <td>8</td>
      <td>52</td>
      <td>NaN</td>
      <td>Oakridge</td>
      <td>491285.000000</td>
      <td>5.453433e+06</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Break and Enter Commercial</td>
      <td>2009</td>
      <td>7</td>
      <td>1</td>
      <td>0</td>
      <td>35</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Break and Enter Commercial</td>
      <td>2013</td>
      <td>6</td>
      <td>1</td>
      <td>20</td>
      <td>0</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491032.270497</td>
      <td>5.459150e+06</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>4</td>
      <td>17</td>
      <td>5</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491032.270497</td>
      <td>5.459150e+06</td>
    </tr>
    <tr>
      <td>9</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>9</td>
      <td>1</td>
      <td>14</td>
      <td>20</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491032.270497</td>
      <td>5.459150e+06</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TYPE                 0
YEAR                 0
MONTH                0
DAY                  0
HOUR                 0
MINUTE               0
HUNDRED_BLOCK       13
NEIGHBOURHOOD    64574
X                  119
Y                  119
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Drop-all-instaces-with-missing-X,Y-and-Hundred-Block">Drop all instaces with missing X,Y and Hundred Block<a class="anchor-link" href="#Drop-all-instaces-with-missing-X,Y-and-Hundred-Block"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">,</span><span class="s1">&#39;HUNDRED_BLOCK&#39;</span><span class="p">],</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TYPE                 0
YEAR                 0
MONTH                0
DAY                  0
HOUR                 0
MINUTE               0
HUNDRED_BLOCK        0
NEIGHBOURHOOD    64455
X                    0
Y                    0
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Converting-all-X,Y-from-UTM-to-lat,lng">Converting all X,Y from UTM to lat,lng<a class="anchor-link" href="#Converting-all-X,Y-from-UTM-to-lat,lng"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Proj</span><span class="p">(</span><span class="n">proj</span><span class="o">=</span><span class="s1">&#39;utm&#39;</span><span class="p">,</span><span class="n">zone</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">ellps</span><span class="o">=</span><span class="s1">&#39;WGS84&#39;</span><span class="p">,</span> <span class="n">preserve_units</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lat_lng</span> <span class="o">=</span> <span class="p">[]</span> 
<span class="n">_</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="s1">&#39;X&#39;</span><span class="p">,</span><span class="s1">&#39;Y&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span>  <span class="n">lat_lng</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">p</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">X</span><span class="p">,</span><span class="n">x</span><span class="o">.</span><span class="n">Y</span><span class="p">,</span><span class="n">inverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">lng</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">lat</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lat_lng</span><span class="p">)):</span>
    <span class="n">lng</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lat_lng</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">lat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lat_lng</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;LAT&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lat</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;LNG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">lng</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
      <td>49.266678</td>
      <td>-123.129029</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
      <td>49.285255</td>
      <td>-123.123649</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
      <td>49.285181</td>
      <td>-123.123536</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
    </tr>
    <tr>
      <td>6</td>
      <td>Break and Enter Commercial</td>
      <td>2009</td>
      <td>7</td>
      <td>1</td>
      <td>0</td>
      <td>35</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Break and Enter Commercial</td>
      <td>2013</td>
      <td>6</td>
      <td>1</td>
      <td>20</td>
      <td>0</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491032.270497</td>
      <td>5.459150e+06</td>
      <td>49.285034</td>
      <td>-123.123311</td>
    </tr>
    <tr>
      <td>8</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>4</td>
      <td>17</td>
      <td>5</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491032.270497</td>
      <td>5.459150e+06</td>
      <td>49.285034</td>
      <td>-123.123311</td>
    </tr>
    <tr>
      <td>9</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>9</td>
      <td>1</td>
      <td>14</td>
      <td>20</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491032.270497</td>
      <td>5.459150e+06</td>
      <td>49.285034</td>
      <td>-123.123311</td>
    </tr>
    <tr>
      <td>10</td>
      <td>Break and Enter Commercial</td>
      <td>2017</td>
      <td>11</td>
      <td>14</td>
      <td>20</td>
      <td>0</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491051.085574</td>
      <td>5.459144e+06</td>
      <td>49.284981</td>
      <td>-123.123053</td>
    </tr>
    <tr>
      <td>11</td>
      <td>Break and Enter Commercial</td>
      <td>2018</td>
      <td>3</td>
      <td>2</td>
      <td>6</td>
      <td>17</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491058.816893</td>
      <td>5.459123e+06</td>
      <td>49.284794</td>
      <td>-123.122946</td>
    </tr>
    <tr>
      <td>12</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>2</td>
      <td>8</td>
      <td>18</td>
      <td>0</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>13</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>4</td>
      <td>28</td>
      <td>15</td>
      <td>0</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>14</td>
      <td>Break and Enter Commercial</td>
      <td>2007</td>
      <td>3</td>
      <td>13</td>
      <td>16</td>
      <td>38</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>15</td>
      <td>Break and Enter Commercial</td>
      <td>2007</td>
      <td>5</td>
      <td>15</td>
      <td>0</td>
      <td>1</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>16</td>
      <td>Break and Enter Commercial</td>
      <td>2010</td>
      <td>2</td>
      <td>8</td>
      <td>11</td>
      <td>4</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>17</td>
      <td>Break and Enter Commercial</td>
      <td>2013</td>
      <td>11</td>
      <td>6</td>
      <td>23</td>
      <td>0</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>18</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>11</td>
      <td>22</td>
      <td>23</td>
      <td>28</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491059.482407</td>
      <td>5.459122e+06</td>
      <td>49.284788</td>
      <td>-123.122937</td>
    </tr>
    <tr>
      <td>19</td>
      <td>Break and Enter Commercial</td>
      <td>2003</td>
      <td>9</td>
      <td>26</td>
      <td>2</td>
      <td>30</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491067.645985</td>
      <td>5.459114e+06</td>
      <td>49.284715</td>
      <td>-123.122824</td>
    </tr>
    <tr>
      <td>20</td>
      <td>Break and Enter Commercial</td>
      <td>2004</td>
      <td>1</td>
      <td>24</td>
      <td>0</td>
      <td>1</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491067.645985</td>
      <td>5.459114e+06</td>
      <td>49.284715</td>
      <td>-123.122824</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Using-KNN-with-havesine-distance">Using KNN with havesine distance<a class="anchor-link" href="#Using-KNN-with-havesine-distance"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train_df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">])</span>
<span class="n">test_df</span><span class="o">=</span><span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isnull</span><span class="p">()]</span>

<span class="n">test_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>38536</td>
      <td>Break and Enter Commercial</td>
      <td>2007</td>
      <td>9</td>
      <td>23</td>
      <td>18</td>
      <td>5</td>
      <td>X NK_LOC ST</td>
      <td>NaN</td>
      <td>492757.48676</td>
      <td>5.458792e+06</td>
      <td>49.281843</td>
      <td>-123.099582</td>
    </tr>
    <tr>
      <td>38537</td>
      <td>Break and Enter Commercial</td>
      <td>2007</td>
      <td>11</td>
      <td>1</td>
      <td>14</td>
      <td>38</td>
      <td>X NK_LOC ST</td>
      <td>NaN</td>
      <td>492757.48676</td>
      <td>5.458792e+06</td>
      <td>49.281843</td>
      <td>-123.099582</td>
    </tr>
    <tr>
      <td>38538</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>5</td>
      <td>18</td>
      <td>18</td>
      <td>30</td>
      <td>X NK_LOC ST "SQUAMISH"</td>
      <td>NaN</td>
      <td>492757.48676</td>
      <td>5.458792e+06</td>
      <td>49.281843</td>
      <td>-123.099582</td>
    </tr>
    <tr>
      <td>104648</td>
      <td>Break and Enter Residential/Other</td>
      <td>2004</td>
      <td>6</td>
      <td>3</td>
      <td>14</td>
      <td>20</td>
      <td>X NK_LOC ST</td>
      <td>NaN</td>
      <td>492757.48676</td>
      <td>5.458792e+06</td>
      <td>49.281843</td>
      <td>-123.099582</td>
    </tr>
    <tr>
      <td>104649</td>
      <td>Break and Enter Residential/Other</td>
      <td>2008</td>
      <td>3</td>
      <td>13</td>
      <td>7</td>
      <td>0</td>
      <td>X NK_LOC ST</td>
      <td>NaN</td>
      <td>492757.48676</td>
      <td>5.458792e+06</td>
      <td>49.281843</td>
      <td>-123.099582</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_train</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[[</span><span class="s1">&#39;LAT&#39;</span><span class="p">,</span><span class="s1">&#39;LNG&#39;</span><span class="p">]]</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">train_df</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="kn">import</span> <span class="n">KNeighborsClassifier</span>

<span class="n">knn_classifier</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">metric</span><span class="o">=</span><span class="s1">&#39;haversine&#39;</span><span class="p">)</span>
<span class="n">knn_classifier</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>KNeighborsClassifier(algorithm=&#39;auto&#39;, leaf_size=30, metric=&#39;minkowski&#39;,
                     metric_params=None, n_jobs=None, n_neighbors=5, p=2,
                     weights=&#39;uniform&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pred_neig</span> <span class="o">=</span> <span class="n">knn_classifier</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">test_df</span><span class="p">[[</span><span class="s1">&#39;LAT&#39;</span><span class="p">,</span><span class="s1">&#39;LNG&#39;</span><span class="p">]])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_df</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pred_neig</span>
<span class="n">pred_neig</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;Central Business District&#39;, &#39;Central Business District&#39;,
       &#39;Central Business District&#39;, &#39;Central Business District&#39;,
       &#39;Central Business District&#39;, &#39;Central Business District&#39;,
       &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;,
       &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;, &#39;Marpole&#39;,
       &#39;Marpole&#39;, &#39;Marpole&#39;], dtype=object)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">0</span><span class="p">]</span>
<span class="n">new_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">new_df</span><span class="p">,</span><span class="n">train_df</span><span class="p">],</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="n">new_df</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">new_df</span><span class="p">,</span><span class="n">test_df</span><span class="p">],</span><span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">new_df</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>TYPE             0
YEAR             0
MONTH            0
DAY              0
HOUR             0
MINUTE           0
HUNDRED_BLOCK    0
NEIGHBOURHOOD    0
X                0
Y                0
LAT              0
LNG              0
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Feature-engineering">Feature engineering<a class="anchor-link" href="#Feature-engineering"> </a></h1>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-new-date-feature">Adding new date feature<a class="anchor-link" href="#Adding-new-date-feature"> </a></h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">YEAR</span><span class="p">,</span><span class="n">month</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">MONTH</span><span class="p">,</span><span class="n">day</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">DAY</span><span class="p">,</span><span class="n">hour</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">HOUR</span><span class="p">,</span><span class="n">minute</span><span class="o">=</span><span class="n">r</span><span class="o">.</span><span class="n">MINUTE</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">new_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
      <th>DATE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
      <td>49.266678</td>
      <td>-123.129029</td>
      <td>2019-03-07 02:06:00</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
      <td>49.285255</td>
      <td>-123.123649</td>
      <td>2019-08-27 04:12:00</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
      <td>49.285181</td>
      <td>-123.123536</td>
      <td>2014-08-08 05:13:00</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2005-11-14 03:09:00</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2006-05-21 04:50:00</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-Weekday-field">Adding Weekday field<a class="anchor-link" href="#Adding-Weekday-field"> </a></h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;WEEKDAY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;DATE&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">dayofweek</span>
<span class="n">new_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
      <th>DATE</th>
      <th>WEEKDAY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
      <td>49.266678</td>
      <td>-123.129029</td>
      <td>2019-03-07 02:06:00</td>
      <td>3</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
      <td>49.285255</td>
      <td>-123.123649</td>
      <td>2019-08-27 04:12:00</td>
      <td>1</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
      <td>49.285181</td>
      <td>-123.123536</td>
      <td>2014-08-08 05:13:00</td>
      <td>4</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2005-11-14 03:09:00</td>
      <td>0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2006-05-21 04:50:00</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Adding-Holiday-field">Adding Holiday field<a class="anchor-link" href="#Adding-Holiday-field"> </a></h3>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ca_holidays</span> <span class="o">=</span> <span class="n">holidays</span><span class="o">.</span><span class="n">Canada</span><span class="p">(</span><span class="n">prov</span><span class="o">=</span><span class="s1">&#39;BC&#39;</span><span class="p">)</span>

<span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;HOLIDAY&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">DATE</span> <span class="ow">in</span> <span class="n">ca_holidays</span> <span class="k">else</span> <span class="mi">0</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">new_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
      <th>DATE</th>
      <th>WEEKDAY</th>
      <th>HOLIDAY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
      <td>49.266678</td>
      <td>-123.129029</td>
      <td>2019-03-07 02:06:00</td>
      <td>3</td>
      <td>0</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
      <td>49.285255</td>
      <td>-123.123649</td>
      <td>2019-08-27 04:12:00</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
      <td>49.285181</td>
      <td>-123.123536</td>
      <td>2014-08-08 05:13:00</td>
      <td>4</td>
      <td>0</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2005-11-14 03:09:00</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2006-05-21 04:50:00</td>
      <td>6</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hashing-latitude-and-longitude-to-geohash">Hashing latitude and longitude to geohash<a class="anchor-link" href="#Hashing-latitude-and-longitude-to-geohash"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">geohash_hilbert</span> <span class="k">as</span> <span class="nn">ghh</span>
<span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">ghh</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">LNG</span><span class="p">,</span> <span class="n">r</span><span class="o">.</span><span class="n">LAT</span><span class="p">,</span> <span class="n">precision</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="n">bits_per_char</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">new_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
      <th>DATE</th>
      <th>WEEKDAY</th>
      <th>HOLIDAY</th>
      <th>CRIME_TYPE</th>
      <th>GEOHASH</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
      <td>49.266678</td>
      <td>-123.129029</td>
      <td>2019-03-07 02:06:00</td>
      <td>3</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e02</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
      <td>49.285255</td>
      <td>-123.123649</td>
      <td>2019-08-27 04:12:00</td>
      <td>1</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
      <td>49.285181</td>
      <td>-123.123536</td>
      <td>2014-08-08 05:13:00</td>
      <td>4</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2005-11-14 03:09:00</td>
      <td>0</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2006-05-21 04:50:00</td>
      <td>6</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_df</span><span class="o">.</span><span class="n">NEIGHBOURHOOD</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;Arbutus Ridge&#39;, &#39;Central Business District&#39;, &#39;Dunbar-Southlands&#39;,
       &#39;Fairview&#39;, &#39;Grandview-Woodland&#39;, &#39;Hastings-Sunrise&#39;,
       &#39;Kensington-Cedar Cottage&#39;, &#39;Kerrisdale&#39;, &#39;Killarney&#39;, &#39;Kitsilano&#39;,
       &#39;Marpole&#39;, &#39;Mount Pleasant&#39;, &#39;Musqueam&#39;, &#39;Oakridge&#39;,
       &#39;Renfrew-Collingwood&#39;, &#39;Riley Park&#39;, &#39;Shaughnessy&#39;, &#39;South Cambie&#39;,
       &#39;Stanley Park&#39;, &#39;Strathcona&#39;, &#39;Sunset&#39;, &#39;Victoria-Fraserview&#39;,
       &#39;West End&#39;, &#39;West Point Grey&#39;], dtype=object)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_df_copy</span> <span class="o">=</span> <span class="n">new_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">new_df</span><span class="o">.</span><span class="n">NEIGHBOURHOOD</span><span class="p">)):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">col</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">new_df</span><span class="p">[</span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">col</span><span class="p">]),</span><span class="nb">len</span><span class="p">(</span><span class="n">new_df</span><span class="o">.</span><span class="n">GEOHASH</span><span class="p">[</span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">]</span><span class="o">==</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Arbutus Ridge 6790 47
Central Business District 138630 49
Dunbar-Southlands 8752 65
Fairview 36503 44
Grandview-Woodland 31413 54
Hastings-Sunrise 21126 82
Kensington-Cedar Cottage 28232 70
Kerrisdale 8428 73
Killarney 11799 70
Kitsilano 30441 59
Marpole 77012 61
Mount Pleasant 36105 48
Musqueam 572 19
Oakridge 9219 43
Renfrew-Collingwood 30892 88
Riley Park 14549 54
Shaughnessy 6289 54
South Cambie 5990 26
Stanley Park 4163 35
Strathcona 25565 40
Sunset 19599 63
Victoria-Fraserview 12263 61
West End 48389 28
West Point Grey 6721 47
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">new_df</span><span class="p">[</span><span class="n">new_df</span><span class="p">[</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Central Business District&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">GEOHASH</span><span class="o">.</span><span class="n">value_counts</span><span class="p">())</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>49</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Categorzing-crimes">Categorzing crimes<a class="anchor-link" href="#Categorzing-crimes"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Severe_crimes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Vehicle Collision or Pedestrian Struck (with Fatality)&#39;</span><span class="p">,</span>
                <span class="s1">&#39;Homicide&#39;</span><span class="p">,</span><span class="s1">&#39;Offence Against a Person&#39;</span><span class="p">,</span><span class="s1">&#39;Vehicle Collision or Pedestrian Struck (with Injury)&#39;</span><span class="p">]</span>
<span class="n">Theft</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Theft from Vehicle&#39;</span><span class="p">,</span><span class="s1">&#39;Other Theft&#39;</span><span class="p">,</span><span class="s1">&#39;Theft of Vehicle&#39;</span><span class="p">,</span><span class="s1">&#39;Theft of Bicycle&#39;</span><span class="p">]</span>



<span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">new_df</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;TYPE&#39;</span><span class="p">])</span> <span class="ow">in</span> <span class="n">Severe_crimes</span><span class="p">:</span>
        <span class="n">new_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;SEVERE&#39;</span>
    <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;TYPE&#39;</span><span class="p">])</span> <span class="ow">in</span> <span class="n">Theft</span><span class="p">:</span>
        <span class="n">new_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Theft&#39;</span>
    <span class="k">elif</span> <span class="nb">str</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;TYPE&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="s1">&#39;Mischief&#39;</span><span class="p">:</span>
        <span class="n">new_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Mischief&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">new_df</span><span class="o">.</span><span class="n">at</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;B&amp;E&#39;</span>
<span class="n">new_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped="">
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>TYPE</th>
      <th>YEAR</th>
      <th>MONTH</th>
      <th>DAY</th>
      <th>HOUR</th>
      <th>MINUTE</th>
      <th>HUNDRED_BLOCK</th>
      <th>NEIGHBOURHOOD</th>
      <th>X</th>
      <th>Y</th>
      <th>LAT</th>
      <th>LNG</th>
      <th>DATE</th>
      <th>WEEKDAY</th>
      <th>HOLIDAY</th>
      <th>CRIME_TYPE</th>
      <th>GEOHASH</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>3</td>
      <td>7</td>
      <td>2</td>
      <td>6</td>
      <td>10XX SITKA SQ</td>
      <td>Fairview</td>
      <td>490612.964805</td>
      <td>5.457110e+06</td>
      <td>49.266678</td>
      <td>-123.129029</td>
      <td>2019-03-07 02:06:00</td>
      <td>3</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e02</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Break and Enter Commercial</td>
      <td>2019</td>
      <td>8</td>
      <td>27</td>
      <td>4</td>
      <td>12</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491007.779775</td>
      <td>5.459174e+06</td>
      <td>49.285255</td>
      <td>-123.123649</td>
      <td>2019-08-27 04:12:00</td>
      <td>1</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Break and Enter Commercial</td>
      <td>2014</td>
      <td>8</td>
      <td>8</td>
      <td>5</td>
      <td>13</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491015.943352</td>
      <td>5.459166e+06</td>
      <td>49.285181</td>
      <td>-123.123536</td>
      <td>2014-08-08 05:13:00</td>
      <td>4</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Break and Enter Commercial</td>
      <td>2005</td>
      <td>11</td>
      <td>14</td>
      <td>3</td>
      <td>9</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2005-11-14 03:09:00</td>
      <td>0</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
    <tr>
      <td>4</td>
      <td>Break and Enter Commercial</td>
      <td>2006</td>
      <td>5</td>
      <td>21</td>
      <td>4</td>
      <td>50</td>
      <td>10XX ALBERNI ST</td>
      <td>West End</td>
      <td>491021.385727</td>
      <td>5.459161e+06</td>
      <td>49.285132</td>
      <td>-123.123461</td>
      <td>2006-05-21 04:50:00</td>
      <td>6</td>
      <td>0</td>
      <td>B&amp;E</td>
      <td>5ed43e44</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">new_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;DATE&#39;</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">get_neighbourhood_data</span><span class="p">(</span><span class="n">data_frame</span><span class="p">,</span><span class="n">neighbourhood</span><span class="p">):</span>
    <span class="n">neighbourhood_data</span> <span class="o">=</span> <span class="n">data_frame</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;NEIGHBOURHOOD&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">neighbourhood_data</span><span class="o">.</span><span class="n">get_group</span><span class="p">(</span><span class="n">neighbourhood</span><span class="p">)[[</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">,</span> <span class="s1">&#39;YEAR&#39;</span><span class="p">,</span> <span class="s1">&#39;MONTH&#39;</span><span class="p">,</span> <span class="s1">&#39;DAY&#39;</span><span class="p">,</span> <span class="s1">&#39;HOUR&#39;</span><span class="p">,</span> <span class="s1">&#39;MINUTE&#39;</span>
                                                        <span class="p">,</span> <span class="s1">&#39;WEEKDAY&#39;</span><span class="p">,</span> <span class="s1">&#39;HOLIDAY&#39;</span><span class="p">,</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">]]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Get-data-from-particular-neighbourhood">Get data from particular neighbourhood<a class="anchor-link" href="#Get-data-from-particular-neighbourhood"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neigh</span> <span class="o">=</span> <span class="s1">&#39;West End&#39;</span>
<span class="n">neigh_df</span> <span class="o">=</span> <span class="n">get_neighbourhood_data</span><span class="p">(</span><span class="n">new_df</span><span class="p">,</span><span class="n">neigh</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neigh_df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 48389 entries, 538267 to 109496
Data columns (total 9 columns):
CRIME_TYPE    48389 non-null object
YEAR          48389 non-null int64
MONTH         48389 non-null int64
DAY           48389 non-null int64
HOUR          48389 non-null int64
MINUTE        48389 non-null int64
WEEKDAY       48389 non-null int64
HOLIDAY       48389 non-null int64
GEOHASH       48389 non-null object
dtypes: int64(7), object(2)
memory usage: 3.7+ MB
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">LabelBinarizer</span>
<span class="c1"># one hot encode crimetype field</span>
<span class="n">lb_crimetype</span> <span class="o">=</span> <span class="n">LabelBinarizer</span><span class="p">()</span>

<span class="n">neigh_df</span> <span class="o">=</span> <span class="n">neigh_df</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">lb_crimetype</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">neigh_df</span><span class="p">[</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">]),</span>
                          <span class="n">columns</span><span class="o">=</span><span class="n">lb_crimetype</span><span class="o">.</span><span class="n">classes_</span><span class="p">,</span> 
                          <span class="n">index</span><span class="o">=</span><span class="n">neigh_df</span><span class="o">.</span><span class="n">index</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neigh_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Index([&#39;CRIME_TYPE&#39;, &#39;YEAR&#39;, &#39;MONTH&#39;, &#39;DAY&#39;, &#39;HOUR&#39;, &#39;MINUTE&#39;, &#39;WEEKDAY&#39;,
       &#39;HOLIDAY&#39;, &#39;GEOHASH&#39;, &#39;B&amp;E&#39;, &#39;Mischief&#39;, &#39;SEVERE&#39;, &#39;Theft&#39;],
      dtype=&#39;object&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Split-Train-and-Test">Split Train and Test<a class="anchor-link" href="#Split-Train-and-Test"> </a></h1>
</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neigh_test</span> <span class="o">=</span> <span class="n">neigh_df</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:]</span>
<span class="n">neigh_train</span> <span class="o">=</span> <span class="n">neigh_df</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neigh_train</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(48384, 13)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestClassifier</span>

<span class="n">forest</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">min_samples_leaf</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>



<span class="n">forest</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">neigh_train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">neigh_train</span><span class="p">[</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>RandomForestClassifier(bootstrap=True, class_weight=None, criterion=&#39;gini&#39;,
                       max_depth=None, max_features=&#39;auto&#39;, max_leaf_nodes=None,
                       min_impurity_decrease=0.0, min_impurity_split=None,
                       min_samples_leaf=5, min_samples_split=2,
                       min_weight_fraction_leaf=0.0, n_estimators=10,
                       n_jobs=None, oob_score=False, random_state=None,
                       verbose=0, warm_start=False)</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pos_pred</span> <span class="o">=</span> <span class="n">forest</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">neigh_test</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pos_prob</span> <span class="o">=</span><span class="n">forest</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">neigh_test</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">,</span><span class="s1">&#39;CRIME_TYPE&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">for</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">pos_pred</span><span class="p">,</span><span class="n">neigh_test</span><span class="p">[</span><span class="s1">&#39;GEOHASH&#39;</span><span class="p">]):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>5ed43e3e 5ed43e3e
5ed43e43 5ed43e4e
5ed43e4e 5ed43e3f
5ed43e43 5ed43e43
5ed43e3e 5ed43e3e
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pos_prob</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">forest</span><span class="o">.</span><span class="n">classes_</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>((5, 28), array([&#39;5ed43db0&#39;, &#39;5ed43db1&#39;, &#39;5ed43db2&#39;, &#39;5ed43db3&#39;, &#39;5ed43db7&#39;,
        &#39;5ed43dbc&#39;, &#39;5ed43dbd&#39;, &#39;5ed43dbe&#39;, &#39;5ed43dbf&#39;, &#39;5ed43dc0&#39;,
        &#39;5ed43dc1&#39;, &#39;5ed43dc3&#39;, &#39;5ed43dc4&#39;, &#39;5ed43e31&#39;, &#39;5ed43e38&#39;,
        &#39;5ed43e3a&#39;, &#39;5ed43e3b&#39;, &#39;5ed43e3c&#39;, &#39;5ed43e3d&#39;, &#39;5ed43e3e&#39;,
        &#39;5ed43e3f&#39;, &#39;5ed43e40&#39;, &#39;5ed43e41&#39;, &#39;5ed43e42&#39;, &#39;5ed43e43&#39;,
        &#39;5ed43e44&#39;, &#39;5ed43e4e&#39;, &#39;5ed43e4f&#39;], dtype=object))</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">top_n</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">pred_loc</span> <span class="o">=</span> <span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">prob</span><span class="p">)[:</span><span class="n">top_n</span><span class="p">]</span> <span class="k">for</span> <span class="n">prob</span> <span class="ow">in</span> <span class="n">pos_prob</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hashesh</span> <span class="o">=</span> <span class="n">forest</span><span class="o">.</span><span class="n">classes_</span>
<span class="n">p</span> <span class="o">=</span> <span class="p">[[</span><span class="n">ghh</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="n">hashesh</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">bits_per_char</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">pred_loc</span><span class="p">]</span>
<span class="n">p</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[[(-123.13751220703125, 49.294281005859375),
  (-123.13201904296875, 49.275054931640625),
  (-123.12652587890625, 49.277801513671875)],
 [(-123.13751220703125, 49.294281005859375),
  (-123.13201904296875, 49.288787841796875),
  (-123.13201904296875, 49.277801513671875)],
 [(-123.13751220703125, 49.294281005859375),
  (-123.13201904296875, 49.288787841796875),
  (-123.13201904296875, 49.286041259765625)],
 [(-123.13751220703125, 49.294281005859375),
  (-123.13201904296875, 49.286041259765625),
  (-123.13201904296875, 49.275054931640625)],
 [(-123.13751220703125, 49.294281005859375),
  (-123.13201904296875, 49.275054931640625),
  (-123.14849853515625, 49.291534423828125)]]</pre>
</div>

</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">map_van</span> <span class="o">=</span> <span class="n">folium</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="mf">49.24</span><span class="p">,</span> <span class="o">-</span><span class="mf">123.11</span><span class="p">],</span> <span class="n">zoom_start</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span><span class="n">tiles</span><span class="o">=</span><span class="s1">&#39;cartodbpositron&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">pnt</span> <span class="ow">in</span> <span class="n">pnt_arr</span><span class="p">:</span>

    <span class="n">folium</span><span class="o">.</span><span class="n">Circle</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">pnt</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pnt</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span><span class="n">radius</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="n">popup</span><span class="o">=</span><span class="s1">&#39;Predicted&#39;</span><span class="p">,</span><span class="n">fill_color</span><span class="o">=</span><span class="s2">&quot;#3db7e4&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">add_to</span><span class="p">(</span><span class="n">map_van</span><span class="p">)</span>

<span class="n">map_van</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;predicted loaction.html&#39;</span><span class="p">)</span>
<span class="n">map_van</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div style="width:100%;"><div style="position:relative;width:100%;height:0;padding-bottom:60%;"><iframe src="data:text/html;charset=utf-8;base64,PCFET0NUWVBFIGh0bWw+CjxoZWFkPiAgICAKICAgIDxtZXRhIGh0dHAtZXF1aXY9ImNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PVVURi04IiAvPgogICAgCiAgICAgICAgPHNjcmlwdD4KICAgICAgICAgICAgTF9OT19UT1VDSCA9IGZhbHNlOwogICAgICAgICAgICBMX0RJU0FCTEVfM0QgPSBmYWxzZTsKICAgICAgICA8L3NjcmlwdD4KICAgIAogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuanMiPjwvc2NyaXB0PgogICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vY29kZS5qcXVlcnkuY29tL2pxdWVyeS0xLjEyLjQubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9qcy9ib290c3RyYXAubWluLmpzIj48L3NjcmlwdD4KICAgIDxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9MZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy8yLjAuMi9sZWFmbGV0LmF3ZXNvbWUtbWFya2Vycy5qcyI+PC9zY3JpcHQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vbGVhZmxldEAxLjUuMS9kaXN0L2xlYWZsZXQuY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vbWF4Y2RuLmJvb3RzdHJhcGNkbi5jb20vYm9vdHN0cmFwLzMuMi4wL2Nzcy9ib290c3RyYXAubWluLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL21heGNkbi5ib290c3RyYXBjZG4uY29tL2Jvb3RzdHJhcC8zLjIuMC9jc3MvYm9vdHN0cmFwLXRoZW1lLm1pbi5jc3MiLz4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0iaHR0cHM6Ly9tYXhjZG4uYm9vdHN0cmFwY2RuLmNvbS9mb250LWF3ZXNvbWUvNC42LjMvY3NzL2ZvbnQtYXdlc29tZS5taW4uY3NzIi8+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL0xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLzIuMC4yL2xlYWZsZXQuYXdlc29tZS1tYXJrZXJzLmNzcyIvPgogICAgPGxpbmsgcmVsPSJzdHlsZXNoZWV0IiBocmVmPSJodHRwczovL3Jhd2Nkbi5naXRoYWNrLmNvbS9weXRob24tdmlzdWFsaXphdGlvbi9mb2xpdW0vbWFzdGVyL2ZvbGl1bS90ZW1wbGF0ZXMvbGVhZmxldC5hd2Vzb21lLnJvdGF0ZS5jc3MiLz4KICAgIDxzdHlsZT5odG1sLCBib2R5IHt3aWR0aDogMTAwJTtoZWlnaHQ6IDEwMCU7bWFyZ2luOiAwO3BhZGRpbmc6IDA7fTwvc3R5bGU+CiAgICA8c3R5bGU+I21hcCB7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7Ym90dG9tOjA7cmlnaHQ6MDtsZWZ0OjA7fTwvc3R5bGU+CiAgICAKICAgICAgICAgICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwKICAgICAgICAgICAgICAgIGluaXRpYWwtc2NhbGU9MS4wLCBtYXhpbXVtLXNjYWxlPTEuMCwgdXNlci1zY2FsYWJsZT1ubyIgLz4KICAgICAgICAgICAgPHN0eWxlPgogICAgICAgICAgICAgICAgI21hcF82YjY5MGVjNGFhODg0NThkOWE5N2RmNTIzMTRkYWFiNyB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAuMCU7CiAgICAgICAgICAgICAgICAgICAgbGVmdDogMC4wJTsKICAgICAgICAgICAgICAgICAgICB0b3A6IDAuMCU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIDwvc3R5bGU+CiAgICAgICAgCjwvaGVhZD4KPGJvZHk+ICAgIAogICAgCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImZvbGl1bS1tYXAiIGlkPSJtYXBfNmI2OTBlYzRhYTg4NDU4ZDlhOTdkZjUyMzE0ZGFhYjciID48L2Rpdj4KICAgICAgICAKPC9ib2R5Pgo8c2NyaXB0PiAgICAKICAgIAogICAgICAgICAgICB2YXIgbWFwXzZiNjkwZWM0YWE4ODQ1OGQ5YTk3ZGY1MjMxNGRhYWI3ID0gTC5tYXAoCiAgICAgICAgICAgICAgICAibWFwXzZiNjkwZWM0YWE4ODQ1OGQ5YTk3ZGY1MjMxNGRhYWI3IiwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IFs0OS4yNCwgLTEyMy4xMV0sCiAgICAgICAgICAgICAgICAgICAgY3JzOiBMLkNSUy5FUFNHMzg1NywKICAgICAgICAgICAgICAgICAgICB6b29tOiAxMiwKICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBwcmVmZXJDYW52YXM6IGZhbHNlLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApOwoKICAgICAgICAgICAgCgogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciB0aWxlX2xheWVyX2RkMjljNDRhMDE1NTRiYmFhMjMyZmU0OWJhMzgwODMyID0gTC50aWxlTGF5ZXIoCiAgICAgICAgICAgICAgICAiaHR0cHM6Ly9jYXJ0b2RiLWJhc2VtYXBzLXtzfS5nbG9iYWwuc3NsLmZhc3RseS5uZXQvbGlnaHRfYWxsL3t6fS97eH0ve3l9LnBuZyIsCiAgICAgICAgICAgICAgICB7ImF0dHJpYnV0aW9uIjogIlx1MDAyNmNvcHk7IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCJcdTAwM2VPcGVuU3RyZWV0TWFwXHUwMDNjL2FcdTAwM2UgY29udHJpYnV0b3JzIFx1MDAyNmNvcHk7IFx1MDAzY2EgaHJlZj1cImh0dHA6Ly9jYXJ0b2RiLmNvbS9hdHRyaWJ1dGlvbnNcIlx1MDAzZUNhcnRvREJcdTAwM2MvYVx1MDAzZSwgQ2FydG9EQiBcdTAwM2NhIGhyZWYgPVwiaHR0cDovL2NhcnRvZGIuY29tL2F0dHJpYnV0aW9uc1wiXHUwMDNlYXR0cmlidXRpb25zXHUwMDNjL2FcdTAwM2UiLCAiZGV0ZWN0UmV0aW5hIjogZmFsc2UsICJtYXhOYXRpdmVab29tIjogMTgsICJtYXhab29tIjogMTgsICJtaW5ab29tIjogMCwgIm5vV3JhcCI6IGZhbHNlLCAib3BhY2l0eSI6IDEsICJzdWJkb21haW5zIjogImFiYyIsICJ0bXMiOiBmYWxzZX0KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmI2OTBlYzRhYTg4NDU4ZDlhOTdkZjUyMzE0ZGFhYjcpOwogICAgICAgIAogICAgCiAgICAgICAgICAgIHZhciBjaXJjbGVfZWZjNDJjOGE3ZDU3NDg0NmJiYWY5OWUzZGI3ZGU5NjQgPSBMLmNpcmNsZSgKICAgICAgICAgICAgICAgIFs0OS4yOTQyODEwMDU4NTkzNzUsIC0xMjMuMTM3NTEyMjA3MDMxMjVdLAogICAgICAgICAgICAgICAgeyJidWJibGluZ01vdXNlRXZlbnRzIjogdHJ1ZSwgImNvbG9yIjogIiMzMzg4ZmYiLCAiZGFzaEFycmF5IjogbnVsbCwgImRhc2hPZmZzZXQiOiBudWxsLCAiZmlsbCI6IHRydWUsICJmaWxsQ29sb3IiOiAiIzNkYjdlNCIsICJmaWxsT3BhY2l0eSI6IDAuMiwgImZpbGxSdWxlIjogImV2ZW5vZGQiLCAibGluZUNhcCI6ICJyb3VuZCIsICJsaW5lSm9pbiI6ICJyb3VuZCIsICJvcGFjaXR5IjogMS4wLCAicmFkaXVzIjogNTAwLCAic3Ryb2tlIjogdHJ1ZSwgIndlaWdodCI6IDN9CiAgICAgICAgICAgICkuYWRkVG8obWFwXzZiNjkwZWM0YWE4ODQ1OGQ5YTk3ZGY1MjMxNGRhYWI3KTsKICAgICAgICAKICAgIAogICAgICAgIHZhciBwb3B1cF8yN2I0ZDY4YTUwN2Y0MzJhYTA3Nzc1MGUzNzE1Nzc3NiA9IEwucG9wdXAoeyJtYXhXaWR0aCI6ICIxMDAlIn0pOwoKICAgICAgICAKICAgICAgICAgICAgdmFyIGh0bWxfYWU4ZGU2MWE2ZDI4NDRjYWFmNjQ1MTEyNTI2YzBhMzcgPSAkKGA8ZGl2IGlkPSJodG1sX2FlOGRlNjFhNmQyODQ0Y2FhZjY0NTExMjUyNmMwYTM3IiBzdHlsZT0id2lkdGg6IDEwMC4wJTsgaGVpZ2h0OiAxMDAuMCU7Ij5QcmVkaWN0ZWQ8L2Rpdj5gKVswXTsKICAgICAgICAgICAgcG9wdXBfMjdiNGQ2OGE1MDdmNDMyYWEwNzc3NTBlMzcxNTc3NzYuc2V0Q29udGVudChodG1sX2FlOGRlNjFhNmQyODQ0Y2FhZjY0NTExMjUyNmMwYTM3KTsKICAgICAgICAKCiAgICAgICAgY2lyY2xlX2VmYzQyYzhhN2Q1NzQ4NDZiYmFmOTllM2RiN2RlOTY0LmJpbmRQb3B1cChwb3B1cF8yN2I0ZDY4YTUwN2Y0MzJhYTA3Nzc1MGUzNzE1Nzc3NikKICAgICAgICA7CgogICAgICAgIAogICAgCiAgICAKICAgICAgICAgICAgdmFyIGNpcmNsZV80MTJlMWZmMmQ0OWY0ZjZkYjIyMGQyOTVhZWFjM2Q5NyA9IEwuY2lyY2xlKAogICAgICAgICAgICAgICAgWzQ5LjI3NTA1NDkzMTY0MDYyNSwgLTEyMy4xMzIwMTkwNDI5Njg3NV0sCiAgICAgICAgICAgICAgICB7ImJ1YmJsaW5nTW91c2VFdmVudHMiOiB0cnVlLCAiY29sb3IiOiAiIzMzODhmZiIsICJkYXNoQXJyYXkiOiBudWxsLCAiZGFzaE9mZnNldCI6IG51bGwsICJmaWxsIjogdHJ1ZSwgImZpbGxDb2xvciI6ICIjM2RiN2U0IiwgImZpbGxPcGFjaXR5IjogMC4yLCAiZmlsbFJ1bGUiOiAiZXZlbm9kZCIsICJsaW5lQ2FwIjogInJvdW5kIiwgImxpbmVKb2luIjogInJvdW5kIiwgIm9wYWNpdHkiOiAxLjAsICJyYWRpdXMiOiA1MDAsICJzdHJva2UiOiB0cnVlLCAid2VpZ2h0IjogM30KICAgICAgICAgICAgKS5hZGRUbyhtYXBfNmI2OTBlYzRhYTg4NDU4ZDlhOTdkZjUyMzE0ZGFhYjcpOwogICAgICAgIAogICAgCiAgICAgICAgdmFyIHBvcHVwXzNlYzhiOTU0NzI5YjQzNmU5YjEyN2Y4Nzc1Nzc3NjRlID0gTC5wb3B1cCh7Im1heFdpZHRoIjogIjEwMCUifSk7CgogICAgICAgIAogICAgICAgICAgICB2YXIgaHRtbF8wN2Q4OTFkNzdjNjg0ZGM3YTI3MzY1YjRhMTUzNGFjYSA9ICQoYDxkaXYgaWQ9Imh0bWxfMDdkODkxZDc3YzY4NGRjN2EyNzM2NWI0YTE1MzRhY2EiIHN0eWxlPSJ3aWR0aDogMTAwLjAlOyBoZWlnaHQ6IDEwMC4wJTsiPlByZWRpY3RlZDwvZGl2PmApWzBdOwogICAgICAgICAgICBwb3B1cF8zZWM4Yjk1NDcyOWI0MzZlOWIxMjdmODc3NTc3NzY0ZS5zZXRDb250ZW50KGh0bWxfMDdkODkxZDc3YzY4NGRjN2EyNzM2NWI0YTE1MzRhY2EpOwogICAgICAgIAoKICAgICAgICBjaXJjbGVfNDEyZTFmZjJkNDlmNGY2ZGIyMjBkMjk1YWVhYzNkOTcuYmluZFBvcHVwKHBvcHVwXzNlYzhiOTU0NzI5YjQzNmU5YjEyN2Y4Nzc1Nzc3NjRlKQogICAgICAgIDsKCiAgICAgICAgCiAgICAKICAgIAogICAgICAgICAgICB2YXIgY2lyY2xlXzM2YTFhMzUwMjc5MDRlYTI4OGU4NTQzODdiMzVhODI0ID0gTC5jaXJjbGUoCiAgICAgICAgICAgICAgICBbNDkuMjc3ODAxNTEzNjcxODc1LCAtMTIzLjEyNjUyNTg3ODkwNjI1XSwKICAgICAgICAgICAgICAgIHsiYnViYmxpbmdNb3VzZUV2ZW50cyI6IHRydWUsICJjb2xvciI6ICIjMzM4OGZmIiwgImRhc2hBcnJheSI6IG51bGwsICJkYXNoT2Zmc2V0IjogbnVsbCwgImZpbGwiOiB0cnVlLCAiZmlsbENvbG9yIjogIiMzZGI3ZTQiLCAiZmlsbE9wYWNpdHkiOiAwLjIsICJmaWxsUnVsZSI6ICJldmVub2RkIiwgImxpbmVDYXAiOiAicm91bmQiLCAibGluZUpvaW4iOiAicm91bmQiLCAib3BhY2l0eSI6IDEuMCwgInJhZGl1cyI6IDUwMCwgInN0cm9rZSI6IHRydWUsICJ3ZWlnaHQiOiAzfQogICAgICAgICAgICApLmFkZFRvKG1hcF82YjY5MGVjNGFhODg0NThkOWE5N2RmNTIzMTRkYWFiNyk7CiAgICAgICAgCiAgICAKICAgICAgICB2YXIgcG9wdXBfYzlhZjYwNGYxODEyNGVhMmJlNTQwNWU2NTU0ZmQ4M2EgPSBMLnBvcHVwKHsibWF4V2lkdGgiOiAiMTAwJSJ9KTsKCiAgICAgICAgCiAgICAgICAgICAgIHZhciBodG1sXzAwMGJmYmVlY2EzOTQ3OTliOGE2ZDg0NzI1ZDRjYWY4ID0gJChgPGRpdiBpZD0iaHRtbF8wMDBiZmJlZWNhMzk0Nzk5YjhhNmQ4NDcyNWQ0Y2FmOCIgc3R5bGU9IndpZHRoOiAxMDAuMCU7IGhlaWdodDogMTAwLjAlOyI+UHJlZGljdGVkPC9kaXY+YClbMF07CiAgICAgICAgICAgIHBvcHVwX2M5YWY2MDRmMTgxMjRlYTJiZTU0MDVlNjU1NGZkODNhLnNldENvbnRlbnQoaHRtbF8wMDBiZmJlZWNhMzk0Nzk5YjhhNmQ4NDcyNWQ0Y2FmOCk7CiAgICAgICAgCgogICAgICAgIGNpcmNsZV8zNmExYTM1MDI3OTA0ZWEyODhlODU0Mzg3YjM1YTgyNC5iaW5kUG9wdXAocG9wdXBfYzlhZjYwNGYxODEyNGVhMmJlNTQwNWU2NTU0ZmQ4M2EpCiAgICAgICAgOwoKICAgICAgICAKICAgIAo8L3NjcmlwdD4=" style="position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;" allowfullscreen="" webkitallowfullscreen="" mozallowfullscreen=""></iframe></div></div>
</div>

</div>

</div>
</div>

</div>
    

</div>



  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="isbhargav/portfolio"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/portfolio/jupyter/matplotlib/sklearn/randomforest/knn/geohashing/feature-engineering/2020/11/01/Location_Prediction.html" hidden></a>
</article>
      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/portfolio/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/portfolio/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/portfolio/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>Portfolio Website</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/isbhargav.github.com" title="isbhargav.github.com"><svg class="svg-icon grey"><use xlink:href="/portfolio/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://twitter.com/twitter.com%2Fbhargavlad" title="twitter.com/bhargavlad"><svg class="svg-icon grey"><use xlink:href="/portfolio/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
